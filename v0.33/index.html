<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · [SCRC] DataRegistryUtils.jl docs</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="[SCRC] DataRegistryUtils.jl docs logo"/></a><div class="docs-package-name"><span class="docs-autofit">[SCRC] DataRegistryUtils.jl docs</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#What-is-the-SCRC-data-pipeline?"><span>What is the SCRC data pipeline?</span></a></li><li><a class="tocitem" href="#What-does-this-package-do?"><span>What does this package do?</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Further-development-work"><span>Further development work</span></a></li></ul></li><li><a class="tocitem" href="examples/">Simple example</a></li><li><a class="tocitem" href="manual/">Package manual</a></li><li><a class="tocitem" href="snip/">Code snippets</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ScottishCovidResponse/DataRegistryUtils.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Please note that this package is still in development.</p></div></div><p><strong>DataRegistryUtils.jl</strong>  -  <em>the SCRC &#39;Data Pipeline&#39; in Julia</em></p><h2 id="What-is-the-SCRC-data-pipeline?"><a class="docs-heading-anchor" href="#What-is-the-SCRC-data-pipeline?">What is the SCRC data pipeline?</a><a id="What-is-the-SCRC-data-pipeline?-1"></a><a class="docs-heading-anchor-permalink" href="#What-is-the-SCRC-data-pipeline?" title="Permalink"></a></h2><p>Per the SCRC docs, the <strong>Scottish COVID-19 Response Consortium [SCRC]</strong> is a research consortia <em>&quot;formed of dozens of individuals from over 30 academic and commercial organisations&quot;</em> focussed on COVID-related research.</p><p>A key outcome of the project is to develop more epidemiological models of COVID-19 spread in order to develop a more robust and clearer understanding of the impacts of different exit strategies from lockdown - see the SCRC docs for more information.</p><p>The data pipeline can be understood by considering its central kernel: the SCRC <strong><a href="https://data.scrc.uk/">Data Registry</a></strong> (DR). Essentially it consists of a relational database, and a <a href="https://data.scrc.uk/api/">RESTful API</a> for reading and writing to the database.</p><p>The <a href="https://data.scrc.uk/static/images/schema.svg">database schema</a> (as illustrated below) is detailed, but the key entity types of relevance to the data pipeline are:</p><ul><li><strong>Data Products</strong> - <em>metadata</em>, or information about data products (not the data itself.)</li><li><strong>Code Repo Releases</strong> - i.e. &#39;models&#39;, or model code.</li><li><strong>Code runs</strong> (or model runs)</li></ul><p>Thus, the Code Repo (and Release) of a particular model may be associated with a number of Code Runs; which in turn may be associated with a number of Data Products (&#39;inputs&#39; and &#39;outputs&#39;.)</p><p>In summary the data pipeline provides both a centralised repository for [meta]data, and a means of tracking the full history of COVID-related modelling outputs, including data and other inputs, such as the random seed used to generate a particular realisation of a given model.</p><h3 id="The-SCRC-Data-Registry"><a class="docs-heading-anchor" href="#The-SCRC-Data-Registry">The SCRC Data Registry</a><a id="The-SCRC-Data-Registry-1"></a><a class="docs-heading-anchor-permalink" href="#The-SCRC-Data-Registry" title="Permalink"></a></h3><h4 id="Database-schema"><a class="docs-heading-anchor" href="#Database-schema">Database schema</a><a id="Database-schema-1"></a><a class="docs-heading-anchor-permalink" href="#Database-schema" title="Permalink"></a></h4><img src="https://data.scrc.uk/static/images/schema.svg" alt="SCRC Data Registry schema="height: 80px;"/><p>Hint: click <a href="https://data.scrc.uk/static/images/schema.svg">here</a> to expand the image.</p><h2 id="What-does-this-package-do?"><a class="docs-heading-anchor" href="#What-does-this-package-do?">What does this package do?</a><a id="What-does-this-package-do?-1"></a><a class="docs-heading-anchor-permalink" href="#What-does-this-package-do?" title="Permalink"></a></h2><p>Similar to the <a href="https://scottishcovidresponse.github.io/docs/data_pipeline/R/">SCRCData package for R</a> and the <a href="https://scottishcovidresponse.github.io/docs/data_pipeline/python/">data<em>pipeline</em>api package</a> for Python, this package provides a language-specific automation layer for the language-agnostic <strong>RESTful API</strong> that is used to interact with the DR. It also handles the downloading (and pre-processing) of Data Products based on that [meta]data.</p><p>Key features include:</p><ul><li>Downloads Data Products specified by a given .yaml config file.</li><li>File hash-based version checking: new data is downloaded only when necessary.</li><li>A SQLite layer for convenient pre-processing (typically aggregation, and the joining of disparate datasets based on common identifiers.)</li></ul><h3 id="SQLite-layer"><a class="docs-heading-anchor" href="#SQLite-layer">SQLite layer</a><a id="SQLite-layer-1"></a><a class="docs-heading-anchor-permalink" href="#SQLite-layer" title="Permalink"></a></h3><p>The SQLite layer is optional - the data can also be returned as a set of nested Dictionaries. However it is the recommended way of using the package since it provides for convenient pre-processing and as well as certain planned features of the package.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>The package is not currently registered and must be added via the package manager Pkg. From the REPL type <code>]</code> to enter Pkg mode and run:</p><pre><code class="language-none">pkg&gt; add https://github.com/ScottishCovidResponse/DataRegistryUtils.jl</code></pre><h2 id="Further-development-work"><a class="docs-heading-anchor" href="#Further-development-work">Further development work</a><a id="Further-development-work-1"></a><a class="docs-heading-anchor-permalink" href="#Further-development-work" title="Permalink"></a></h2><p>There is ongoing development work to do, subject to feedback from users. In particular:</p><h3 id="Registering-data-products"><a class="docs-heading-anchor" href="#Registering-data-products">Registering data products</a><a id="Registering-data-products-1"></a><a class="docs-heading-anchor-permalink" href="#Registering-data-products" title="Permalink"></a></h3><p>The registration of Data Products, including but not limited to model outputs, in the DR is a WIP.</p><h3 id="SQL-based-access-logs-(a-component-of-Code-Run-objects)"><a class="docs-heading-anchor" href="#SQL-based-access-logs-(a-component-of-Code-Run-objects)">SQL-based access logs (a component of Code Run objects)</a><a id="SQL-based-access-logs-(a-component-of-Code-Run-objects)-1"></a><a class="docs-heading-anchor-permalink" href="#SQL-based-access-logs-(a-component-of-Code-Run-objects)" title="Permalink"></a></h3><p>Existing functionality for recording data usage in model runs is based on the individual data products specified in the data configuration .yaml file. However since data products may include multiple components, it would be better to have a more precise record of the data that is actually utilised. This functionality is currently being implemented via the aforementioned SQLite layer.</p><p>Features in consideration include optional &#39;tags&#39; specified by the user at the point of [data] access - passed as a parameter to a given function call. It is anticipated that these tags could be used to record information such as the calling Julia Module / line of code; key filters and aggregation levels used to process the data; or even references to downstream outputs, e.g. <em>&#39;Page x, Table y in Report z.&#39;</em></p><h3 id="Suggestions-welcome!"><a class="docs-heading-anchor" href="#Suggestions-welcome!">Suggestions welcome!</a><a id="Suggestions-welcome!-1"></a><a class="docs-heading-anchor-permalink" href="#Suggestions-welcome!" title="Permalink"></a></h3><p>Feel free to reach out: <strong>martin.burke@bioss.ac.uk</strong></p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="examples/">Simple example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 29 January 2021 00:56">Friday 29 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
