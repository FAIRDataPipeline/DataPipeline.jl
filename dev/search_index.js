var documenterSearchIndex = {"docs":
[{"location":"examples/#Simple-example","page":"Simple example","title":"Simple example","text":"","category":"section"},{"location":"examples/#Introduction","page":"Simple example","title":"Introduction","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The purpose of this tutorial is to demonstrate use of the package to interact with the SCRC Data Registry (DR) in a process referred to as the 'pipeline', including:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"How to read data products from the DR,\nutilise them in a simple simulation model,\nregister the simulation model code with the DR,\nand register the simulation model run with the DR.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The example is also provided as working code (including the accompanying configuration files) in the examples/simple directory of the package repository. The steps and the corresponding line of code in that module are:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Steps / Learning outcomes Code\n1. Preliminaries L24\n2. Config files and scripts L32\n3. Reading data products from the Registry L43\n4. Running a model simulation L65\n4b. Automatic data access logging L103\n5. Staging 'code repo releases' (i.e. model code) L107\n6. Staging model 'code runs' L111\n7. Committing staged objects to the Registry L133","category":"page"},{"location":"examples/#.-Package-installation","page":"Simple example","title":"0. Package installation","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The package is not currently registered and must be added via the package manager Pkg. From the REPL type ] to enter Pkg mode and run:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"pkg> add https://github.com/ScottishCovidResponse/DataRegistryUtils.jl","category":"page"},{"location":"examples/#.-Preliminaries:-import-packages","page":"Simple example","title":"1. Preliminaries: import packages","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"import DataRegistryUtils    # pipeline stuff\nimport DPOMPs               # simulation of epidemiological models\nimport YAML                 # for reading model config file\nimport Random               # other assorted packages used incidentally\nimport DataFrames","category":"page"},{"location":"examples/#.-Specify-config-files,-scripts-and-data-directory","page":"Simple example","title":"2. Specify config files, scripts and data directory","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"These variables and the corresponding files determine the model configuration; data products to be downloaded; and 'submission script' (see 2c.)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"model_config = \"/examples/simple/model_config.yaml\"     # (see 2a)\ndata_config = \"/examples/simple/data_config.yaml\"       # (see 2b)\nsubmission_script = \"julia examples/simple/main.jl\"     # (see 2c)","category":"page"},{"location":"examples/#a.-The-*model_config.yaml*-file","page":"Simple example","title":"2a. The model_config.yaml file","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The 'model config' file concept is used throughout the SCRC data pipeline, (i.e. not just within this package.) In this example, it is used to store information about both the model code (step 3,) and the individual code run (step 6.) The example below is also given here.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"# model\nmodel_name: \"DRU simple example\"\nmodel_repo: \"https://github.com/ScottishCovidResponse/DataRegistryUtils.jl\"\n# NB. ^ because the example is part of this package - replace with your own repo\nmodel_version: \"0.0.4\"\nmodel_description: \"A simple SEIR simulation for demonstrating use of the DataRegistryUtils.jl package.\"\nmodel_website: \"https://mjb3.github.io/DiscretePOMP.jl/stable/\"\n\n# simulation parameters\nrandom_seed: 1\ninitial_s: 1000   # initial population size\nmax_t: 180.0      # simulation time\nbeta: 0.7         # contact rate := beta SI / N","category":"page"},{"location":"examples/#b.-The-*data_config.yaml*-file","page":"Simple example","title":"2b. The data_config.yaml file","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Similar to the model configuration file, 'data config' files are a standard way to interact with the data pipeline, including in other languages besides Julia. This example specifies the Data Products that are downloaded in step 4:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"fail_on_hash_mismatch: True     # set 'False' to suppress data mismatch errors\nnamespace: SCRC                 # default namespace\n\nread:\n  - where:\n      data_product: human/infection/SARS-CoV-2/symptom-probability\n      component: symptom-probability\n  - where:\n      data_product: prob_hosp_and_cfr/data_for_scotland\n      component: cfr_byage\n    use:\n      namespace: EERA\n  - where:\n      data_product: human/infection/SARS-CoV-2/asymptomatic-period\n      component: asymptomatic-period\n  - where:\n      data_product: human/infection/SARS-CoV-2/infectious-duration\n      component: infectious-duration\n  - where:\n      data_product: human/infection/SARS-CoV-2/latent-period\n      component: latent-period\n  - where:\n      data_product: fixed-parameters/T_hos\n      component: T_hos\n    use:\n      namespace: EERA\n  - where:\n      data_product: fixed-parameters/T_rec\n      component: T_rec\n    use:\n      namespace: EERA","category":"page"},{"location":"examples/#c.-The-*submission_script*-variable","page":"Simple example","title":"2c. The submission_script variable","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Finally, the submission_script variable is a string that contains the contents of the 'submission script' file; another artefact of the pipeline process that applies outwith the Julia package.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"submission_script = \"julia examples/simple/main.jl\"","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Here it is used to define the 'entry point' of the application; together with the model code and 'config' files, it will allow others to reproduce our results in the future with ease and precision (an important benefit of the overall pipeline process.)","category":"page"},{"location":"examples/#.-Downloading-data-products","page":"Simple example","title":"3. Downloading data products","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Here we read some epidemiological parameters from the DR, so we can use them to run an SEIR simulation in step (5). First we download some data, then read it.","category":"page"},{"location":"examples/#a.-Download-data","page":"Simple example","title":"3a. Download data","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"First, we process the data_config file, which (in this case) returns a variable representing a connection to a SQLite database. I.e. we download the data products:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"data_dir = \"/examples/simple/data/\" # local directory where data is to be stored\ndb = DataRegistryUtils.initialise_local_registry(data_dir, data_config=data_config)","category":"page"},{"location":"examples/#b.-Read-some-data","page":"Simple example","title":"3b. Read some data","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Next, we read some parameters and convert them to the required units.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"inf_period_days = DataRegistryUtils.read_estimate(db, \"human/infection/SARS-CoV-2/\", \"infectious-duration\", key=\"value\", data_type=Float64)[1] / 24\nlat_period_days = DataRegistryUtils.read_estimate(db, \"human/infection/SARS-CoV-2/\", \"latent-period\", key=\"value\", data_type=Float64)[1] / 24","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"See Code snippets and the Package manual for information about reading other types of data product.","category":"page"},{"location":"examples/#c.-Offline-access","page":"Simple example","title":"3c. Offline access","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Once the data has been downloaded initially, it can be retrieved for offline access (e.g. no or slow internet connections) using the offline_mode option:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"db = DataRegistryUtils.initialise_local_registry(data_dir, data_config=data_config, auto_logging=true, offline_mode=true)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The main functions for registering objects, such as model code, model runs, and data products, work by staging the data to a local database so they are also compatible with 'offline mode'. only the commit_ functions require internet access, which can be run once access has been restored.","category":"page"},{"location":"examples/#.-Model-simulation","page":"Simple example","title":"4. Model simulation","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Step 5 relies on the use of another package: DiscretePOMP.jl, so you may wish to skip this section or replace it with, e.g. your own model or simulation code.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Next, for illustration purposes only we run a simple SEIR simulation using the Gillespie simulation feature of the DiscretePOMP.jl package. We use the downloaded parameters* as inputs, and finally plot the results as a time series of the population as they migrate between states according to the stochastic dynamics of the model.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"First we extract some information about the model run from the model_config.yaml file:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"mc = YAML.load_file(model_config)\np = mc[\"initial_s\"]   # population size\nt = mc[\"max_t\"]       # simulation time\nbeta = mc[\"beta\"]     # nb. contact rate := beta SI / N\nRandom.seed!(mc[\"random_seed\"])","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"These include the population size and contact parameter beta, as well as the random seed. We are then ready the generate a DiscretePOMP model:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"## define a vector of simulation parameters\ntheta = [beta, inf_period_days^-1, lat_period_days^-1]\n## initial system state variable [S E I R]\ninitial_condition = [p - 1, 0, 1, 0]\n## generate DPOMPs model (see https://github.com/mjb3/DiscretePOMP.jl)\nmodel = DiscretePOMP.generate_model(\"SEIR\", initial_condition, freq_dep=true)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Finally, we run the simulation and plot the results:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"x = DiscretePOMP.gillespie_sim(model, theta, tmax=t)\nprintln(DiscretePOMP.plot_trajectory(x))","category":"page"},{"location":"examples/#b.-automatic-data-access-logging","page":"Simple example","title":"4b. automatic data access logging","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"In order to register a given code run in the DR, we require a record of the data products and components accessed to produce that particular run. Data access logging can essentially be handled automatically. The most recent active data log is used to register code runs by default. However, it is advisable to manually 'finish' the log instead, and specify the log id manually at the point of registration:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"## this is not usually necessary in a single process environment:\n# initialise_data_log(db, offline_mode)\n\n## this is necessary when we want a [human-*and*-machine-readable] file copy of the log\nlog_id = DataRegistryUtils.finish_data_log(db; filepath=data_log)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"This is particularly important if we are planning on doing further work in the interim, such as if we want an accurate record of the access time. Logs should also handled manually (including initialisation) when working with multiple processes running on separate cores, but utilising the same filesystem/data resources.","category":"page"},{"location":"examples/#.-Registering-model-code","page":"Simple example","title":"3. Registering model code","text":"","category":"section"},{"location":"examples/#a.-SCRC-access-token-request-via-https://data.scrc.uk/docs/","page":"Simple example","title":"3a. SCRC access token - request via https://data.scrc.uk/docs/","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"An access token is required if you want to write to the DR (e.g. register model code / runs) but not necessary if you only want to read from the DR (e.g. download data products.)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The token must not be shared. Common approaches include the use of system variables or [private] configuration files. In this example I have included mine as a separate Julia file with a single line of code. Note that it is important to also specify the .gitignore so as not to accidentally upload to the internet!","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"include(\"access-token.jl\")","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The variable itself looks like: \"token [my token]\". For example, if the token is the numbers one through six, the access-token.jl file looks like this:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"const scrc_access_tkn = \"token 123456\"","category":"page"},{"location":"examples/#b.-Register-model-code","page":"Simple example","title":"3b. Register model code","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Back in the main file, we handle model code [release] registration by calling a function that automatically returns the existing code_repo_release URI if it is already registered, or a new one if not.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"code_release_id = DataRegistryUtils.register_github_model(model_config, scrc_access_tkn)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Here we have used a .yaml configuration file but for illustration, the code is roughly equivalent to this:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"model_name = \"DRU simple example\"\nmodel_repo = \"https://github.com/ScottishCovidResponse/DataRegistryUtils.jl\"\nmodel_version = \"0.0.1\"\nmodel_description = \" ... \" (nb. insert description)\nmodel_docs = \"https://mjb3.github.io/DiscretePOMP.jl/stable/\"\ncode_release_id = DataRegistryUtils.register_github_model(model_name, model_version, model_repo, model_hash, scrc_access_tkn, model_description=model_description, model_website=model_docs)","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Finally, the resulting URI is in the form:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"code_release_id := \"https://data.scrc.uk/api/code_repo_release/2157/\"","category":"page"},{"location":"examples/#.-Registering-a-'model-run'","page":"Simple example","title":"6. Registering a 'model run'","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Next we register the results of this particular simulation by POSTing to the code_run endpoint of the DR's RESTful API:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"model_run_description = \"Just another SEIR simulation.\"\nmodel_run_id = DataRegistryUtils.register_model_run(model_config, submission_script, code_release_id, model_run_description, scrc_access_tkn)","category":"page"},{"location":"examples/#.-Finally,-commit-objects-to-registry","page":"Simple example","title":"7. Finally, commit objects to registry","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"The final step is to commit the local changes we have made to the DR:","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"code_release_url = DataRegistryUtils.commit_staged_model(db, code_release_id, scrc_access_tkn)\nmodel_run_url = DataRegistryUtils.commit_staged_run(db, model_run_id, scrc_access_tkn)\nDataRegistryUtils.registry_commit_status(db)    # optional: display status","category":"page"},{"location":"examples/#Finished!","page":"Simple example","title":"Finished!","text":"","category":"section"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"That concludes the example. A complete working example of this code can be found here.","category":"page"},{"location":"examples/","page":"Simple example","title":"Simple example","text":"Please note that certain features, notably the registration of Data Products (i.e. model 'inputs' and 'outputs') is currently still a work in progress. See the home page for more information.","category":"page"},{"location":"snip/#Code-snippets","page":"Code snippets","title":"Code snippets","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"Pages = [\"snip.md\"]\nDepth = 3","category":"page"},{"location":"snip/#Getting-started-package-installation","page":"Code snippets","title":"Getting started - package installation","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"The package is not currently registered and must be added via the package manager Pkg. From the REPL type ] to enter Pkg mode and run:","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"pkg> add https://github.com/ScottishCovidResponse/DataRegistryUtils.jl","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"using DataRegistryUtils\n?fetch_data_per_yaml","category":"page"},{"location":"snip/#Usage","page":"Code snippets","title":"Usage","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"It is recommended to use a .yaml data configuration file to specify the data products to be downloaded. Some example .yaml file are included in the examples folder. Refer to https://data.scrc.uk/ for information about other data products available in the registry.","category":"page"},{"location":"snip/#Example:-refreshing-(i.e.-downloading)-data","page":"Code snippets","title":"Example: refreshing (i.e. downloading) data","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"TEST_FILE = \"examples/data_config.yaml\"\nDATA_OUT = \"out/\"\ndata = DataRegistryUtils.fetch_data_per_yaml(TEST_FILE, DATA_OUT)","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"The results referenced by the data variable is a SQLite file databased, containing records of downloaded data products, components, and so on. They can be accessed thusly:","category":"page"},{"location":"snip/#Example:-reading-key-value-pairs,-e.g.-point-estimates","page":"Code snippets","title":"Example: reading key-value pairs, e.g. point estimates","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"data_product = \"human/infection/SARS-CoV-2/infectious-duration\"\ncomp_name = \"infectious-duration\"\n# by data product\nest = DataRegistryUtils.read_estimate(data, data_product)\n# by component name\nest = DataRegistryUtils.read_estimate(data, data_product, comp_name)","category":"page"},{"location":"snip/#Example:-reading-arrays","page":"Code snippets","title":"Example: reading arrays","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"data_product = \"records/SARS-CoV-2/scotland/cases_and_management\"\ncomp_name = \"/test_result/date-cumulative\"\n## read array by dp:\nsome_arrays = DataRegistryUtils.read_array(data, data_product)\none_array = some_arrays[comp_name]\n## read array by component name:\none_array = DataRegistryUtils.read_array(data, data_product, comp_name)","category":"page"},{"location":"snip/#Example:-reading-tables","page":"Code snippets","title":"Example: reading tables","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"data_product = \"geography/scotland/lookup_table\"\ncomp_name = \"/conversiontable/scotland\"\ntbl = DataRegistryUtils.read_table(data, data_product, comp_name)","category":"page"},{"location":"snip/#Example:-reading-data-products-from-file","page":"Code snippets","title":"Example: reading data products from file","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"You can also use the package to read in a file that has already been downloaded, as follows:","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"fp = \"/path/to/some/file.h5\"\ndp = DataRegistryUtils.read_data_product_from_file(fp, use_axis_arrays = true, verbose = false)\ncomponent = dp[\"/conversiontable/scotland\"]","category":"page"},{"location":"snip/#Example:-custom-SQL-query","page":"Code snippets","title":"Example: custom SQL query","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"Data can also be queried using SQL for convenient joining and aggregation. For example:","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"using SQLite, DataFrames\ndb = DataRegistryUtils.read_data_product(fp, use_sql = true)\nx = DBInterface.execute(data, \"SELECT * FROM data_product\") |> DataFrame","category":"page"},{"location":"snip/#What's-my-file?","page":"Code snippets","title":"What's my file?","text":"","category":"section"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"Sometimes you need to know if a file (or directory of files,) is registered in the Data Registry. This can be accomplished using the whats_my_file function. For example:","category":"page"},{"location":"snip/","page":"Code snippets","title":"Code snippets","text":"DataRegistryUtils.whats_my_file(\"path/to/some/file/or/directory\")","category":"page"},{"location":"manual/#Package-manual","page":"Package manual","title":"Package manual","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"Pages = [\"manual.md\"]\nDepth = 3","category":"page"},{"location":"manual/#Reading-/-downloading-data","page":"Package manual","title":"Reading / downloading data","text":"","category":"section"},{"location":"manual/#Downloading-data-products","page":"Package manual","title":"Downloading data products","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"Note that data products are processed and downloaded at the point of initialisation, provided that a data_config file is specified, and the offline_mode option is not used.","category":"page"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"initialise_local_registry","category":"page"},{"location":"manual/#DataRegistryUtils.initialise_local_registry","page":"Package manual","title":"DataRegistryUtils.initialise_local_registry","text":"initialise_local_registry(out_dir = \"./out/\"; ... )\n\nRefresh and load data products from the SCRC data registry.\n\nChecks the file hash for each data product and downloads anew any that are determined to be out-of-date. Allowing that the function has been called previously (i.e. so that the data has already been downloaded,)\n\nParameters\n\nout_dir             – the local system directory where data will be stored.\ndata_config         – the location of the .yaml config file (see the docs.)\noffline_mode        – set true when the Data Registry's RESTful API is inaccessible, e.g. no internet connection.\nsql_file            – (optional) SQL file for e.g. custom SQLite views, indexes, or whatever.\ndb_path             – (optionally) specify the filepath of the database to use (or create.)\nauto_logging        – set true to enable automatic data access logging.\nverbose             – set true to show extra output in the console.\nforce_db_refresh    – set true to overide file hash check on local refresh, debugging only (hint: in the event of corrupted data, it would be easier to clear the designated directory of all data files and start anew.)\n\n\n\n\n\n","category":"function"},{"location":"manual/#Reading-data","page":"Package manual","title":"Reading data","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"Note that arrays can be processed into flat 2d tables, using either load_array! or read_array with the flatten=true.","category":"page"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"read_estimate\nread_array\nload_array!\nread_table\nread_data_product_from_file","category":"page"},{"location":"manual/#DataRegistryUtils.read_estimate","page":"Package manual","title":"DataRegistryUtils.read_estimate","text":"read_estimate(cn::SQLite.DB, data_product::String, [component::String]; ... )\n\nRead key-value pair, e.g. a point-estimate.\n\nSQLite Data Registry helper function. Search TOML-based data resources stored in cn, a SQLite database created previously by a call to fetch_data_per_yaml.\n\nParameters\n\ncn              – SQLite.DB object.\ndata_product    – data product search string, e.g. \"human/infection/SARS-CoV-2/\".\ncomponent       – as above, [optional] search string for components names.\n\nOptions\n\nversion         – optionally specify the version (else the latest version is read.)\nfuzzy_match     – set false for exact matches only.\nkey             – specify to return .toml keys of a particular type, e.g. \"type\" or \"value\".\ndata_type       – specify to return an array of this type instead of a DataFrame.\nlog_access      – set false to supress data access logging.\ndata_log_id     – (optionally) specify the data log id.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.read_array","page":"Package manual","title":"DataRegistryUtils.read_array","text":"read_array(db::SQLite.DB, data_product::String[, component::String]; ... )\n\nRead HDF5 array data resource(s) – optionally specify the individual component.\n\nParameters\n\ndb              – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\ndata_product    – data product search string, e.g. \"human/infection/SARS-CoV-2/\".\ncomponent       – [optionally] specify the component name.\n\nOptions\n\nversion         – optionally specify the version (else the latest version is read.)\nfuzzy_match     – set false for exact matches only.\nflatten         – set true for a flattened 2d table.\nuse_axis_arrays – set true to return the matching data as AxisArray types.\nlog_access      – set false to supress data access logging.\ndata_log_id     – (optionally) specify the data log id.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.load_array!","page":"Package manual","title":"DataRegistryUtils.load_array!","text":"load_array!(db::SQLite.DB, data_product::String[, component::String]; ... )\n\nLoad HDF5 array(s) data resource.\n\nSQLite Data Registry helper function. Optionally specify the individual component.\n\nParameters\n\ndb              – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\ndata_product    – data product search string, e.g. \"human/infection/SARS-CoV-2/\".\ncomponent       – [optionally] specify the component name.\n\nOptions\n\nversion         – optionally specify the version (else the latest version is read.)\nfuzzy_match     – set false for exact matches only.\nsql_alias       – optional alias for the database table.\nlog_access      – set false to supress data access logging.\ndata_log_id     – (optionally) specify the data log id.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.read_table","page":"Package manual","title":"DataRegistryUtils.read_table","text":"read_table(db::SQLite.DB, data_product::String, component::String)\n\nSQLite Data Registry helper function. Search and return [HDF5] table data as a DataFrame.\n\nParameters\n\ndb              – SQLite.DB object.\ndata_product    – data product search string, e.g. \"human/infection/SARS-CoV-2/\".\ncomponent       – as above, [required] search string for components names.\n\nOptions\n\nversion         – optionally specify the version (else the latest version is read.)\nfuzzy_match     – set false for exact matches only.\nlog_access      – set false to supress data access logging.\ndata_log_id     – (optionally) specify the data log id.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.read_data_product_from_file","page":"Package manual","title":"DataRegistryUtils.read_data_product_from_file","text":"read_data_product_from_file(filepath; use_axis_arrays = false, verbose = false)\n\nRead HDF5, CSV or TOML file from local system.\n\nParameters\n\nfilepath        – the location of an e.g. HDF5 file.\nuse_axis_arrays – convert the output to AxisArrays, where applicable.\nverbose         – set to true to show extra output in the console.\n\n\n\n\n\n","category":"function"},{"location":"manual/#Writing-to-the-Data-Registry","page":"Package manual","title":"Writing to the Data Registry","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"The process of registering objects such as data, code, and model runs, in the main Data Registry involves two steps; [local] registration, and then committing registered objects to the main online Registry.","category":"page"},{"location":"manual/#Registering-objects-locally","page":"Package manual","title":"Registering objects locally","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"register_data_product\nregister_github_model\nregister_model_run","category":"page"},{"location":"manual/#DataRegistryUtils.register_data_product","page":"Package manual","title":"DataRegistryUtils.register_data_product","text":"register_data_product(db, dp_name, version, filepath; namespace=\"SCRC\")\n\nStage a data set (i.e. a local file) for upload to the data_product endpoint of the SCRC Data Registry.\n\nParameters\n\ndb              – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\ndp_name         – data product name.\nversion         – e.g. \"0.0.1\"\nfilepath        – path of the e.g. HDF5 file.\nnamespace       – (optionally) specify the namespace, \"SCRC\" by default.\nstorage_root_id – Data Registry storage root identifier, \"https://data.scrc.uk/api/storage_root/11/\" (GitHub) by default.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.register_github_model","page":"Package manual","title":"DataRegistryUtils.register_github_model","text":"register_github_model(model_config, scrc_access_tkn; ... )\nregister_github_model(db, model_config, scrc_access_tkn; ... )\nregister_github_model(db, model_name, model_version, model_repo, scrc_access_tkn; ... )\n\nStage model code as a code_repo_release for upload the SCRC data registry.\n\nThe staged code_repo_release can then be pushed to the main Data Registry using e.g. the commit_staged_model function. If used, the model_config file should include (at a minimum) the model_name, model_version and model_repo fields. Else these can be passed directly to the function.\n\nParameters\n\ndb                  – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nmodel_config        – path to the model config .yaml file.\nmodel_name          – label for the model release.\nmodel_version       – version number in the format 'n.n.n', e.g. 001.\nmodel_repo          – url of the model [e.g. GitHub] repo.\nmodel_hash          – arbitrary identifying 'hash' string of the model.\n\nNamed parameters\n\nmodel_description   – (optional) description of the model.\nmodel_website       – (optional) website, e.g. for an accompanying paper, blog, or model documentation – model_repo by default.\nstorage_root_id     – Data Registry storage root identifier, \"https://data.scrc.uk/api/storage_root/11/\" (GitHub) by default.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.register_model_run","page":"Package manual","title":"DataRegistryUtils.register_model_run","text":"register_model_run(db, model_id, model_config, submission_script_text, model_run_description)\n\nStage a model run for subsequent upload to the code_run endpoint of the SCRC Data Registry.\n\nParameters\n\ndb                      – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nmodel_id                – [Internal] model id.\nmodel_config            – path to the model config .yaml file.\nsubmission_script_text  – e.g. 'julia my/julia/code.jl'.\nmodel_run_description   – description of the model run.\n\n\n\n\n\n","category":"function"},{"location":"manual/#Committing-objects-to-the-online-Registry","page":"Package manual","title":"Committing objects to the online Registry","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"Note that 'staged' objects (i.e. registered locally) can be committed all at once using commit_all, or one at a time using the identifiers yielded by the above function calls, e.g. register_data_product.","category":"page"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"registry_commit_status\ncommit_all","category":"page"},{"location":"manual/#DataRegistryUtils.registry_commit_status","page":"Package manual","title":"DataRegistryUtils.registry_commit_status","text":"registry_commit_status(db)\n\nDisplay the current commit status of the local staging Registry.\n\nParameters\n\ndb                      – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.commit_all","page":"Package manual","title":"DataRegistryUtils.commit_all","text":"commit_all(db, scrc_access_tkn)\n\nCommit all outstanding (i.e. 'staged') objects to the Data Registry.\n\nParameters\n\ndb                  – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nscrc_access_tkn     – access token (see https://data.scrc.uk/docs/.)\nftp_username        – optionally specify\nftp_password        – optionally specify\n\n\n\n\n\n","category":"function"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"commit_staged_data_product\ncommit_staged_model\ncommit_staged_run","category":"page"},{"location":"manual/#DataRegistryUtils.commit_staged_data_product","page":"Package manual","title":"DataRegistryUtils.commit_staged_data_product","text":"commit_staged_data_product(db, staging_id, scrc_access_tkn)\n\nCommit staged [local] file to the data_product endpoint of the SCRC Data Registry.\n\nParameters\n\ndb                      – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nstaging_id              – data product id, obtained when the model was [pre-]registered.\nscrc_access_tkn         – access token (see https://data.scrc.uk/docs/.)\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.commit_staged_model","page":"Package manual","title":"DataRegistryUtils.commit_staged_model","text":"commit_staged_model(db, staging_id, scrc_access_tkn)\n\nUpload model run to the code_run endpoint of the SCRC Data Registry.\n\nParameters\n\ndb                      – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nstaging_id              – model id, obtained when the model was [pre-]registered.\nscrc_access_tkn         – access token (see https://data.scrc.uk/docs/.)\n\n\n\n\n\n","category":"function"},{"location":"manual/#DataRegistryUtils.commit_staged_run","page":"Package manual","title":"DataRegistryUtils.commit_staged_run","text":"commit_staged_run(db, staging_id, scrc_access_tkn)\n\nUpload model run to the code_run endpoint of the SCRC Data Registry.\n\nParameters\n\ndb                      – SQLite.DB object yielded by previous call to fetch_data_per_yaml.\nstaging_id              – run id, obtained when the run was [pre-]registered.\nscrc_access_tkn         – access token (see https://data.scrc.uk/docs/.)\n\n\n\n\n\n","category":"function"},{"location":"manual/#Other","page":"Package manual","title":"Other","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"whats_my_file\nregistry_audit","category":"page"},{"location":"manual/#Index","page":"Package manual","title":"Index","text":"","category":"section"},{"location":"manual/","page":"Package manual","title":"Package manual","text":"","category":"page"},{"location":"fdp_manual/#FDP-interface-manual","page":"FDP interface manual","title":"FDP interface manual","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"This is the updated manual for the upcoming fdp interfaced version of the package.","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"Pages = [\"fdp_manual.md\"]\nDepth = 3","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"Note that data products are processed and downloaded at the point of initialisation, provided that a data_config file is specified, and the offline_mode option is not used.","category":"page"},{"location":"fdp_manual/#Reading-/-downloading-data","page":"FDP interface manual","title":"Reading / downloading data","text":"","category":"section"},{"location":"fdp_manual/#Downloading-data-products","page":"FDP interface manual","title":"Downloading data products","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"initialise","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.initialise","page":"FDP interface manual","title":"DataRegistryUtils.initialise","text":"initialise(config_file)\n\nRead working config.yaml file. Returns a DataRegistryHandle containing:\n\nthe working config.yaml file contents\nthe object id for this file\nthe object id for the submission script file\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#Reading-data","page":"FDP interface manual","title":"Reading data","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"Note that the fdp_ prefix is temporary.","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"fdp_read_estimate\nfdp_read_array\nfdp_read_table","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.fdp_read_estimate","page":"FDP interface manual","title":"DataRegistryUtils.fdp_read_estimate","text":"fdp_read_estimate(handle, data_product; component, version)\n\nRead TOML-based data product.\n\nnote that it must already have been downloaded from the remote data store using fdp pull.\nthe latest version of the data is read unless otherwise specified.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#DataRegistryUtils.fdp_read_array","page":"FDP interface manual","title":"DataRegistryUtils.fdp_read_array","text":"fdp_read_array(handle, data_product; component, version)\n\nRead [array] data product.\n\nnote that it must already have been downloaded from the remote data store using fdp pull.\nthe latest version of the data is read unless otherwise specified.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#DataRegistryUtils.fdp_read_table","page":"FDP interface manual","title":"DataRegistryUtils.fdp_read_table","text":"fdp_read_table(handle, data_product; component, version)\n\nRead [table] data product.\n\nnote that it must already have been downloaded from the remote data store using fdp pull.\nthe latest version of the data is read unless otherwise specified.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#Extenal-objects","page":"FDP interface manual","title":"Extenal objects","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"NB. per the [Data pipeline docs][dpdocs], use linkread() and linkwrite() to read and write external objects (rather than the standard API ``readxxxandwrite_xxx`` functions.)","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"link_read\nlink_write","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.link_read","page":"FDP interface manual","title":"DataRegistryUtils.link_read","text":"link_read(handle, alias)\n\nThis function returns the path of an external object in the local data store:\n\nIf the alias is already recorded in the handle, returns the path. If not, find the location of the file referenced by its alias.\nAlso, stores metadata associated with the external object.\nNote that the alias is not recorded in the data registry. Rather, it is a means to reference external objects in the config.yaml file.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#DataRegistryUtils.link_write","page":"FDP interface manual","title":"DataRegistryUtils.link_write","text":"link_write(handle, alias)\n\nFor writing external objects.\n\nUse linkread() and linkwrite() to read and write external objects, rather than the standard API readxxx() and writexxx() calls.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#Writing-to-the-Data-Registry","page":"FDP interface manual","title":"Writing to the Data Registry","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"The process of registering objects such as data, code, and model runs, in the main Data Registry involves two steps; [local] registration, and then committing registered objects to the main online Registry.","category":"page"},{"location":"fdp_manual/#Registering-objects","page":"FDP interface manual","title":"Registering objects","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"write_array","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.write_array","page":"FDP interface manual","title":"DataRegistryUtils.write_array","text":"write_array()\n\nWrite an array as a component to an hdf5 file.\n\nWIP.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"WIP. TBA:","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"estimate, table\nmodel\nmodel run? or is this done only via scripts?","category":"page"},{"location":"fdp_manual/#Raising-issues","page":"FDP interface manual","title":"Raising issues","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"raise_issue","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.raise_issue","page":"FDP interface manual","title":"DataRegistryUtils.raise_issue","text":"raise_issue(handle; ... )\n\nRegister issue with data product; component; external object; or script.\n\nPass the object URI as a named parameter[s], e.g. raise_issue(handle; data_product=dp, component=comp).\n\nOptional parameters\n\ndata_product\ncomponent\nexternal_object\nscript\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#Other","page":"FDP interface manual","title":"Other","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"whats_my_file\nregistry_audit","category":"page"},{"location":"fdp_manual/#DataRegistryUtils.whats_my_file","page":"FDP interface manual","title":"DataRegistryUtils.whats_my_file","text":"whats_my_file(path::String; show_path=false)\n\nSearch the Data Registry for matches with a given local file (or directory of files.)\n\nParameters\n\npath        – local file path, or directory.\nshow_path   – (optional) display the [remote] path of any matching files.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#DataRegistryUtils.registry_audit","page":"FDP interface manual","title":"DataRegistryUtils.registry_audit","text":"registry_audit(url; trace=\"both\")\n\nSearch the Data Registry for known issues with, e.g. data products, code repo releases or code runs.\n\nAny issues that impact upon provenance (i.e. [a subset of] the graph of Registry objects associated with this one) can also be displayed w.r.t. \"inputs\", \"outputs\" or \"both\".\n\nParameters\n\nurl     – the URL of e.g. a data product or code repo release in the Data Registry.\ntrace   – \"inputs\", \"outputs\" or \"both\" – also the default.\n\n\n\n\n\n","category":"function"},{"location":"fdp_manual/#Index","page":"FDP interface manual","title":"Index","text":"","category":"section"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"Pages = [\"fdp_manual.md\"]","category":"page"},{"location":"fdp_manual/","page":"FDP interface manual","title":"FDP interface manual","text":"[dpdocs]: https://scottishcovidresponse.github.io/docs/datapipeline/interface/","category":"page"},{"location":"#Introduction","page":"Introduction","title":"Introduction","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nSee here for the main SCRC documentation. This website is for the Julia package only.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"DataRegistryUtils.jl  -  the SCRC 'Data Pipeline' in Julia","category":"page"},{"location":"#What-is-the-SCRC-data-pipeline?","page":"Introduction","title":"What is the SCRC data pipeline?","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Per the SCRC docs, the Scottish COVID-19 Response Consortium [SCRC] is a research consortia \"formed of dozens of individuals from over 30 academic and commercial organisations\" focussed on COVID-related research.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"A key outcome of the project is to develop more epidemiological models of COVID-19 spread in order to develop a more robust and clearer understanding of the impacts of different exit strategies from lockdown - see the SCRC docs for more information.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"As a working process developed by the SCRC, the data pipeline can be understood by considering the central kernel of its technological implementation: the Data Registry (DR). Essentially it consists of a relational database, and a RESTful API for reading and writing to the database.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The database schema (as illustrated below) is detailed, but key entity types of relevance here include:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Data Products - metadata, or information about data 'products'. To elaborate: a data product typically includes a link to, e.g. a table of scientific data, but [for the most part] the underlying data is not actually stored in the DR. This may appear at first glance to be a limitation but there is a key benefit to the approach which is discussed briefly in due course.\nCode Repo Releases - i.e. 'models', or a given version of some code that implements, e.g. a statistical model.\nCode runs - or model runs, such as the output from a single realisation of the model.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Thus, the Code Repo (and Release) relating to a given statistical model, may be associated with a number of Code Runs, which in turn may be associated with a number of Data Products (as 'inputs' and 'outputs'.)","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"In summary the data pipeline provides both a centralised repository for [meta]data, and a means of tracking the full history of COVID-related modelling outputs, including data and other inputs, such as the random seed used to generate a particular realisation of a given model.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The resulting 'audit trail' can thus provide transparency, and greatly improve the reproducibility, of published scientific research, even where the models and data used to produce them are complex or sophisticated.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Note that as a working process the pipeline is somewhat cyclical in nature: model outputs can be used to provide inputs for other models, and so on. Thus the audit capabilities of the pipeline process are not limited to individual research projects, models or datasets - it naturally extends to a sequence of ongoing projects, possibly produced by different users and teams ('groups' in the DR.)","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"In other words, it mirrors the way in which scientific research in general is published, whilst providing a robust solution to vitally important current challenges far beyond the fields of public health and epidemiology, such as reproducibility and transparency.","category":"page"},{"location":"#The-SCRC-Data-Registry","page":"Introduction","title":"The SCRC Data Registry","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"As with the pipeline itself, a key design strength of the Data Registry (DR) is its 'agnosticism'. That is, it is agnostic with respect to both programming languages and [the format of] datasets. Thus, it is compatible even with those that have not been invented yet.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Whilst this is a key strength, it does impose certain constraints on the functionality that can be provided directly within the framework of the DR itself. For example, in order to provide features such as file processing (necessary for the automated import of Data Products from the DR) it is necessary to know the file format in advance. This is also true of data processing in general: in order to do any kind of meaningful data processing, we must know both the structure of a given type of dataset, and how to recognise it in practice.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"For that reason, features such as these are instead provided by what can be regarded as an 'automation layer', a set of utility-like software packages (such as this one) and tools that comprise an important layer of the pipline's software ecosystem, because they make it possible for model developers to download data, and otherwise meaningfully interact with the SCRC pipeline process using only a few lines of code.","category":"page"},{"location":"#Data-Registry-schema","page":"Introduction","title":"Data Registry schema","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"<img src=\"https://data.scrc.uk/static/images/schema.svg\" alt=\"SCRC Data Registry schema=\"height: 80px;\"/>","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Hint: click here to expand the image.","category":"page"},{"location":"#What-does-this-package-do?","page":"Introduction","title":"What does this package do?","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Similar to the SCRCData package for R and the datapipelineapi package for Python, this package provides a language-specific automation layer [for the language-agnostic RESTful API that is used to interact with the DR.] It also handles the downloading (and pre-processing) of Data Products based on that [meta]data.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Key features include:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Convenient Data Products downloads, specified by a given 'data config' .yaml file.\nFile hash-based version checking: new data is downloaded only when necessary.\nA SQLite layer for convenient pre-processing (typically aggregation, and the joining of disparate datasets based on common identifiers.)\nEasily register model code or realisations with a single line of code.","category":"page"},{"location":"#SQLite-layer","page":"Introduction","title":"SQLite layer","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The SQLite layer is optional - the data can also be returned as a set of nested Dictionaries. However it is the recommended way of using the package since it provides for convenient pre-processing and as well as certain planned features of the package. See the SQLite.jl docs for more information about that package, and the Simple example and Code snippets page for practical usage examples pertinent to this one.","category":"page"},{"location":"#Getting-started","page":"Introduction","title":"Getting started","text":"","category":"section"},{"location":"#Package-installation","page":"Introduction","title":"Package installation","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The package is not currently registered and must be added via the package manager Pkg. From the REPL type ] to enter Pkg mode and run:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"pkg> add https://github.com/ScottishCovidResponse/DataRegistryUtils.jl","category":"page"},{"location":"#Further-development-work","page":"Introduction","title":"Further development work","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"There is ongoing development work to do, subject to feedback from users. In particular:","category":"page"},{"location":"#Registering-data-products","page":"Introduction","title":"Registering data products","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The registration of Data Products, including but not limited to model outputs, in the DR is a WIP.","category":"page"},{"location":"#SQL-based-access-logs-(a-component-of-Code-Run-objects)","page":"Introduction","title":"SQL-based access logs (a component of Code Run objects)","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Existing functionality for recording data usage in model runs is based on the individual data products specified in the data configuration .yaml file. However since data products may include multiple components, it would be better to have a more precise record of the data that is actually utilised. This functionality is currently being implemented via the aforementioned SQLite layer.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Features in consideration include optional 'tags' specified by the user at the point of [data] access - passed as a parameter to a given function call. It is anticipated that these tags could be used to record information such as the calling Julia Module / line of code; key filters and aggregation levels used to process the data; or even references to downstream outputs, e.g. 'Page x, Table y in Report z.'","category":"page"},{"location":"#Suggestions-welcome!","page":"Introduction","title":"Suggestions welcome!","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Feel free to reach out: martin.burke@bioss.ac.uk","category":"page"}]
}
